<openerp><data>
  <template id="assets_frontend_rutas" inherit_id="website.layout" name="Oferta">
  <xpath expr="." position="inside">
      <link rel='stylesheet' href='/website_sale/static/src/css/bootstrap.css'/>
      <link rel='stylesheet' href='/website_sale/static/src/css/bootstrap.min.css'/>
      <link rel='stylesheet' href='/website_sale/static/src/css/bootstrap-theme.css'/>
      <link rel='stylesheet' href='/website_sale/static/src/css/bootstrap-theme-min.css'/>
      <link rel='stylesheet' href='/website_sale/static/src/css/website_sale.css'/>
      <link rel='stylesheet' href='/website_sale/static/src/css/website_sale.css'/>
      <link rel='stylesheet' href='/website_sale/static/src/css/website_sale.css'/>
      <link rel='stylesheet' href='/website_sale/static/src/css/website_mail.css'/>
      <link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
      <script>var city = new Array();$(".typeahead").typeahead({source : city})</script>
      <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
      <script type="text/javascript">

    var customIcons = {
      restaurant: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      },    
      bar: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      }
    };
    
    var dummy="hello";
    var directionDisplay;
    var directionsService = new google.maps.DirectionsService();
    var rendererOptions = {
        draggable: true
    };

    function load() {
      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(4.6075486, -74.0712431),
        zoom: 12,
        mapTypeId: 'roadmap'
      });
      directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);
      directionsDisplay.setMap(map);
      var infoWindow = new google.maps.InfoWindow;
      calcRoute();
    }

    function calcRoute() {
  var pos_idu = new google.maps.LatLng(4.6075486, -74.0712431);
  var pos_pablo = new google.maps.LatLng(4.669138, -74.014840);
  var request = {
    origin: pos_idu,
    destination: pos_pablo,
   // waypoints:[{location: pos_idu}, {location: pos_pablo}],
    travelMode: google.maps.TravelMode.DRIVING
  };
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
    }
  });
}

    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }


        function RefreshMap(){
                waypts =[];
                var start = $('#From').val();
                var end = $('#To').val();
                divs = $('.inputs');
                //alert(start);
                $('.field').each(function(){
                    waypts.push({
                    location:this.value,
                     stopover:true
                     });
              

                });
                    
                calcRoute(start, end, waypts);
 
        }
      </script>
  </xpath>
</template>
  <template id="index">
    <t t-call="website.layout">
      <t t-set="title">Offer</t>
      <div class="oe_structure">
        <div class="container">
          <t t-foreach="ofertas" t-as="offer">
            <p>hola que hace</p>
            <p><a t-attf-href="/rutas/{{ slug(offer) }}">
              <t t-esc="offer.descripcion"/></a>
            </p>
          </t>
        </div>
      </div>
    </t>
  </template>
  <template id="descripcion">
    <t t-call="website.layout">
      <t t-set="title">Offer</t>
      <body>
      <div class="oe_structure"/>
      <div class="oe_structure">
        <div class="container">
                <h3 t-field="person.origen"/>
                <h4 t-field="person.destino"/>
        </div>
        <body onload="load()">
            <div class="container">
                <div class="span5" id="map" style="width: 100%; height: 400px"></div>
            </div>
        </body>
      </div>
      <div class="oe_structure"/>
      </body>
    </t>
  </template>
</data></openerp>